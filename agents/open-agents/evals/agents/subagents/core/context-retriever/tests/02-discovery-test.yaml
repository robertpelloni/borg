id: core-context-retriever-discovery
name: "Context Retriever: Discovery Test - Map Context Structure"
description: |
  Tests the context-retriever's ability to discover and map the context structure
  of a repository.
  
  Validates:
  - Discovers .opencode/context/ directory
  - Lists available categories (core, development, etc.)
  - Maps the context file structure
  - Identifies context organization patterns
  
  Critical Behavior:
  - MUST use list/glob tools to discover structure
  - MUST identify primary context location
  - MUST count total context files
  - MUST map categories/subdirectories
category: developer

prompts:
  - text: |
      Discover and map the context structure in this repository. Tell me:
      1. Where is the primary context located?
      2. What categories/directories exist?
      3. How many context files are there?
      4. What is the organization pattern?

approvalStrategy:
  type: auto-approve

behavior:
  mustUseTools:
    - list
  minToolCalls: 2
  maxToolCalls: 10

expectedViolations:
  - rule: approval-gate
    shouldViolate: false
    severity: error

timeout: 90000

tags:
  - context-retriever
  - discovery
  - core-subagent
  - read-only
